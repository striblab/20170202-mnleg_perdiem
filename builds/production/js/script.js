!function t(e,r,o){function i(a,d){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!d&&l)return l(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=r[a]={exports:{}};e[a][0].call(s.exports,function(t){var r=e[a][1][t];return i(r||t)},s,s.exports,t,e,r,o)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,r){d3.json("./data/mnleg_spending.json",function(t,e){function r(){for(var t=0;t<i.length;t++)"Total Senate"==String(i[t].name)&&($("#infoBoxS .district").html("<div>"+i[t].name+" expenses</div>"),$("#infoBoxS .perdiem").html("<div>"+d3.format("$,.0f")(Number(i[t].perdiem))+"</div>"),$("#infoBoxS .communications").html("<div>"+d3.format("$,.0f")(Number(i[t].communications))+"</div>"),$("#infoBoxS .lodging").html("<div>"+d3.format("$,.0f")(Number(i[t].lodging))+"</div>"),$("#infoBoxS .mileage").html("<div>"+d3.format("$,.0f")(Number(i[t].mileage))+"</div>"),$("#infoBoxS .othertravel").html("<div>"+d3.format("$,.0f")(Number(i[t].other_travel))+"</div>"),$("#infoBoxS .other").html("<div>"+d3.format("$,.0f")(Number(i[t].other_expenses))+"</div>"),$("#infoBoxS .districtX").html("<div>"+d3.format("$,.0f")(Number(i[t].district_expenses))+"</div>"),$("#infoBoxS .total").html("<div>"+d3.format("$,.0f")(Number(i[t].total))+"</div>"));for(var t=0;t<i.length;t++)"Total House"==String(i[t].name)&&($("#infoBoxH .district").html("<div>"+i[t].name+" of Representatives expenses</div>"),$("#infoBoxH .perdiem").html("<div>"+d3.format("$,.0f")(Number(i[t].perdiem))+"</div>"),$("#infoBoxH .communications").html("<div>"+d3.format("$,.0f")(Number(i[t].communications))+"</div>"),$("#infoBoxH .lodging").html("<div>"+d3.format("$,.0f")(Number(i[t].lodging))+"</div>"),$("#infoBoxH .mileage").html("<div>"+d3.format("$,.0f")(Number(i[t].mileage))+"</div>"),$("#infoBoxH .othertravel").html("<div>"+d3.format("$,.0f")(Number(i[t].other_travel))+"</div>"),$("#infoBoxH .other").html("<div>"+d3.format("$,.0f")(Number(i[t].other_expenses))+"</div>"),$("#infoBoxH .districtX").html("<div>"+d3.format("$,.0f")(Number(i[t].district_expenses))+"</div>"),$("#infoBoxH .total").html("<div>"+d3.format("$,.0f")(Number(i[t].total))+"</div>"))}function o(t,e,o,n,a,d,l,s){function m(t){if(t&&c!==t){var e=h.centroid(t);e[0],e[1],6,c=t}else u/2,p/2,3,c=null;d3.selectAll("#mapSMetro path, #mapSState path, #mapHMetro path, #mapHState path").classed("faded",!1).classed("active",!1),x.selectAll("path").classed("faded",!0).classed("active",c&&function(t){return t===c})}function f(t){if(t&&c!==t){var e=h.centroid(t);e[0],e[1],1,c=t}else u/2,p/2,1,c=null;x.selectAll("path").classed("faded",!1).classed("active",c&&function(t){return t===c})}var c,u=320,p=400;if("us"==d)var v=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==d)var v=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==d)var v=d3.geo.mercator().scale([16800]).center([-92.384033,45.209134]);var h=d3.geo.path().projection(v),g=d3.select(t+" svg").attr("width",u).attr("height",p);g.append("rect").attr("class","background").attr("width",u).attr("height",p);var x=g.append("g");d3.json("shapefiles/"+n,function(t,e){x.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",h).on("click",m).attr("id",function(t){return(d+"_"+t.properties.DISTRICT).replace(new RegExp(" ","g"),"-")}).attr("precinctName",function(t){return t.properties.DISTRICT}).attr("class",function(t){for(var e=0;e<i.length;e++)if(t.properties.DISTRICT==i[e].district){if(Number(i[e].total)>=3e4)return"purple5";if(Number(i[e].total)>=25e3)return"purple4";if(Number(i[e].total)>=2e4)return"purple3";if(Number(i[e].total)>=1e4)return"purple2";if(Number(i[e].total)>=0)return"purple1"}}).on("mousedown",function(t){var e="";"senate"==a?e="#infoBoxS":"house"==a&&(e="#infoBoxH");for(var r=0;r<i.length;r++)String(t.properties.DISTRICT)==String(i[r].district)&&($(e+" .district").html("<div>District "+t.properties.DISTRICT+": "+i[r].first+" "+i[r].last+" ("+i[r].party+")</div>"),$(e+" .perdiem").html("<div>"+d3.format("$,.0f")(Number(i[r].perdiem))+"</div>"),$(e+" .communications").html("<div>"+d3.format("$,.0f")(Number(i[r].communications))+"</div>"),$(e+" .lodging").html("<div>"+d3.format("$,.0f")(Number(i[r].lodging))+"</div>"),$(e+" .mileage").html("<div>"+d3.format("$,.0f")(Number(i[r].mileage))+"</div>"),$(e+" .othertravel").html("<div>"+d3.format("$,.0f")(Number(i[r].other_travel))+"</div>"),$(e+" .other").html("<div>"+d3.format("$,.0f")(Number(i[r].other_expenses))+"</div>"),$(e+" .districtX").html("<div>"+d3.format("$,.0f")(Number(i[r].district_expenses))+"</div>"),$(e+" .total").html("<div>"+d3.format("$,.0f")(Number(i[r].total))+"</div>"))}).style("stroke-width","1px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){for(var e=0;e<i.length;e++)if(t.properties.DISTRICT==i[e].district)return"<div class='district'>District "+t.properties.DISTRICT+"</div><div>"+d3.format("$,.0f")(i[e].total)+" spent</div>"})),x.append("path").attr("id","state-borders").attr("d",h)});d3.behavior.zoom().on("zoom",function(){x.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),x.selectAll("circle").attr("d",h.projection(v)),x.selectAll("path").attr("d",h.projection(v))});$(".zoom").click(function(){f(),r()}),$(".mapSwitch").click(function(){$("#filter input").val("")})}var i=e.expenses;console.log(e),$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null!=e?e[1]||0:null};var n=$.urlParam("chart");null!=n?($(".chart").hide(),$("#"+n).show()):$(".chart").show(),r(),d3.helper={},d3.helper.tooltip=function(t){return function(e){var r,o=d3.select("body").node();e.on("mouseover",function(e,i){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var n=d3.mouse(o);r.style("left",n[0]+10+"px").style("top",n[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,i)}).on("mousemove",function(e,i){var n=d3.mouse(o);r.style("left",n[0]+10+"px").style("top",n[1]-15+"px");var a=t(e,i)||"";r.html(a)}).on("mouseout",function(t,e){r.remove()})}},o("#mapHMetro","#infobox","#chart","mnleg_metro.json","house","metro",i,0),o("#mapHState","#infobox","#chart","mnleg.json","house","mn",i,0),o("#mapSMetro","#infobox","#chart","mnsenate_metro.json","senate","metro",i,0),o("#mapSState","#infobox","#chart","mnsenate.json","senate","mn",i,0)})},{}]},{},[1]);